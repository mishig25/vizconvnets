"use strict";
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var vega_util_1 = require("vega-util");
var channel_1 = require("./channel");
var log = require("./log");
var util_1 = require("./util");
var ScaleType;
(function (ScaleType) {
    // Continuous - Quantitative
    ScaleType.LINEAR = 'linear';
    ScaleType.BIN_LINEAR = 'bin-linear';
    ScaleType.LOG = 'log';
    ScaleType.POW = 'pow';
    ScaleType.SQRT = 'sqrt';
    // Continuous - Time
    ScaleType.TIME = 'time';
    ScaleType.UTC = 'utc';
    // sequential
    ScaleType.SEQUENTIAL = 'sequential';
    // Quantile, Quantize, threshold
    ScaleType.QUANTILE = 'quantile';
    ScaleType.QUANTIZE = 'quantize';
    ScaleType.THRESHOLD = 'threshold';
    ScaleType.ORDINAL = 'ordinal';
    ScaleType.BIN_ORDINAL = 'bin-ordinal';
    ScaleType.POINT = 'point';
    ScaleType.BAND = 'band';
})(ScaleType = exports.ScaleType || (exports.ScaleType = {}));
/**
 * Index for scale categories -- only scale of the same categories can be merged together.
 * Current implementation is trying to be conservative and avoid merging scale type that might not work together
 */
var SCALE_CATEGORY_INDEX = {
    linear: 'numeric',
    log: 'numeric',
    pow: 'numeric',
    sqrt: 'numeric',
    'bin-linear': 'bin-linear',
    time: 'time',
    utc: 'time',
    sequential: 'sequential',
    ordinal: 'ordinal',
    'bin-ordinal': 'bin-ordinal',
    point: 'ordinal-position',
    band: 'ordinal-position'
};
exports.SCALE_TYPES = util_1.keys(SCALE_CATEGORY_INDEX);
/**
 * Whether the two given scale types can be merged together.
 */
function scaleCompatible(scaleType1, scaleType2) {
    var scaleCategory1 = SCALE_CATEGORY_INDEX[scaleType1];
    var scaleCategory2 = SCALE_CATEGORY_INDEX[scaleType2];
    return scaleCategory1 === scaleCategory2 ||
        (scaleCategory1 === 'ordinal-position' && scaleCategory2 === 'time') ||
        (scaleCategory2 === 'ordinal-position' && scaleCategory1 === 'time');
}
exports.scaleCompatible = scaleCompatible;
/**
 * Index for scale precedence -- high score = higher priority for merging.
 */
var SCALE_PRECEDENCE_INDEX = {
    // numeric
    linear: 0,
    log: 1,
    pow: 1,
    sqrt: 1,
    // time
    time: 0,
    utc: 0,
    // ordinal-position -- these have higher precedence than continuous scales as they support more types of data
    point: 10,
    band: 11,
    // non grouped types
    'bin-linear': 0,
    sequential: 0,
    ordinal: 0,
    'bin-ordinal': 0,
};
/**
 * Return scale categories -- only scale of the same categories can be merged together.
 */
function scaleTypePrecedence(scaleType) {
    return SCALE_PRECEDENCE_INDEX[scaleType];
}
exports.scaleTypePrecedence = scaleTypePrecedence;
exports.CONTINUOUS_TO_CONTINUOUS_SCALES = ['linear', 'bin-linear', 'log', 'pow', 'sqrt', 'time', 'utc'];
var CONTINUOUS_TO_CONTINUOUS_INDEX = vega_util_1.toSet(exports.CONTINUOUS_TO_CONTINUOUS_SCALES);
exports.CONTINUOUS_DOMAIN_SCALES = exports.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(['sequential' /* TODO add 'quantile', 'quantize', 'threshold'*/]);
var CONTINUOUS_DOMAIN_INDEX = vega_util_1.toSet(exports.CONTINUOUS_DOMAIN_SCALES);
exports.DISCRETE_DOMAIN_SCALES = ['ordinal', 'bin-ordinal', 'point', 'band'];
var DISCRETE_DOMAIN_INDEX = vega_util_1.toSet(exports.DISCRETE_DOMAIN_SCALES);
var BIN_SCALES_INDEX = vega_util_1.toSet(['bin-linear', 'bin-ordinal']);
exports.TIME_SCALE_TYPES = ['time', 'utc'];
function hasDiscreteDomain(type) {
    return type in DISCRETE_DOMAIN_INDEX;
}
exports.hasDiscreteDomain = hasDiscreteDomain;
function isBinScale(type) {
    return type in BIN_SCALES_INDEX;
}
exports.isBinScale = isBinScale;
function hasContinuousDomain(type) {
    return type in CONTINUOUS_DOMAIN_INDEX;
}
exports.hasContinuousDomain = hasContinuousDomain;
function isContinuousToContinuous(type) {
    return type in CONTINUOUS_TO_CONTINUOUS_INDEX;
}
exports.isContinuousToContinuous = isContinuousToContinuous;
exports.defaultScaleConfig = {
    textXRangeStep: 90,
    rangeStep: 21,
    pointPadding: 0.5,
    bandPaddingInner: 0.1,
    facetSpacing: 16,
    minBandSize: 2,
    minFontSize: 8,
    maxFontSize: 40,
    minOpacity: 0.3,
    maxOpacity: 0.8,
    // FIXME: revise if these *can* become ratios of rangeStep
    minSize: 9,
    minStrokeWidth: 1,
    maxStrokeWidth: 4
};
function isExtendedScheme(scheme) {
    return scheme && !!scheme['name'];
}
exports.isExtendedScheme = isExtendedScheme;
function isSelectionDomain(domain) {
    return domain && domain['selection'];
}
exports.isSelectionDomain = isSelectionDomain;
var SCALE_PROPERTY_INDEX = {
    type: 1,
    domain: 1,
    range: 1,
    rangeStep: 1,
    scheme: 1,
    // Other properties
    reverse: 1,
    round: 1,
    // quantitative / time
    clamp: 1,
    nice: 1,
    // quantitative
    base: 1,
    exponent: 1,
    interpolate: 1,
    zero: 1,
    // band/point
    padding: 1,
    paddingInner: 1,
    paddingOuter: 1
};
exports.SCALE_PROPERTIES = util_1.flagKeys(SCALE_PROPERTY_INDEX);
var type = SCALE_PROPERTY_INDEX.type, domain = SCALE_PROPERTY_INDEX.domain, range = SCALE_PROPERTY_INDEX.range, rangeStep = SCALE_PROPERTY_INDEX.rangeStep, scheme = SCALE_PROPERTY_INDEX.scheme, NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX = __rest(SCALE_PROPERTY_INDEX, ["type", "domain", "range", "rangeStep", "scheme"]);
exports.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES = util_1.flagKeys(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX);
function scaleTypeSupportProperty(scaleType, propName) {
    switch (propName) {
        case 'type':
        case 'domain':
        case 'reverse':
        case 'range':
            return true;
        case 'scheme':
            return util_1.contains(['sequential', 'ordinal', 'bin-ordinal', 'quantile', 'quantize'], scaleType);
        case 'interpolate':
            // FIXME(https://github.com/vega/vega-lite/issues/2902) how about ordinal?
            return util_1.contains(['linear', 'bin-linear', 'pow', 'log', 'sqrt', 'utc', 'time'], scaleType);
        case 'round':
            return isContinuousToContinuous(scaleType) || scaleType === 'band' || scaleType === 'point';
        case 'padding':
            return isContinuousToContinuous(scaleType) || util_1.contains(['point', 'band'], scaleType);
        case 'paddingOuter':
        case 'rangeStep':
            return util_1.contains(['point', 'band'], scaleType);
        case 'paddingInner':
            return scaleType === 'band';
        case 'clamp':
            return isContinuousToContinuous(scaleType) || scaleType === 'sequential';
        case 'nice':
            return isContinuousToContinuous(scaleType) || scaleType === 'sequential' || scaleType === 'quantize';
        case 'exponent':
            return scaleType === 'pow';
        case 'base':
            return scaleType === 'log';
        case 'zero':
            return hasContinuousDomain(scaleType) && !util_1.contains([
                'log',
                'time', 'utc',
                'bin-linear',
                'threshold',
                'quantile' // quantile depends on distribution so zero does not matter
            ], scaleType);
    }
    /* istanbul ignore next: should never reach here*/
    throw new Error("Invalid scale property " + propName + ".");
}
exports.scaleTypeSupportProperty = scaleTypeSupportProperty;
/**
 * Returns undefined if the input channel supports the input scale property name
 */
function channelScalePropertyIncompatability(channel, propName) {
    switch (propName) {
        case 'interpolate':
        case 'scheme':
            if (!channel_1.isColorChannel(channel)) {
                return log.message.cannotUseScalePropertyWithNonColor(channel);
            }
            return undefined;
        case 'type':
        case 'domain':
        case 'range':
        case 'base':
        case 'exponent':
        case 'nice':
        case 'padding':
        case 'paddingInner':
        case 'paddingOuter':
        case 'rangeStep':
        case 'reverse':
        case 'round':
        case 'clamp':
        case 'zero':
            return undefined; // GOOD!
    }
    /* istanbul ignore next: it should never reach here */
    throw new Error("Invalid scale property \"" + propName + "\".");
}
exports.channelScalePropertyIncompatability = channelScalePropertyIncompatability;
function channelSupportScaleType(channel, scaleType) {
    switch (channel) {
        case channel_1.Channel.X:
        case channel_1.Channel.Y:
        case channel_1.Channel.SIZE: // TODO: size and opacity can support ordinal with more modification
        case channel_1.Channel.OPACITY:
            // Although it generally doesn't make sense to use band with size and opacity,
            // it can also work since we use band: 0.5 to get midpoint.
            return isContinuousToContinuous(scaleType) || util_1.contains(['band', 'point'], scaleType);
        case channel_1.Channel.COLOR:
        case channel_1.Channel.FILL:
        case channel_1.Channel.STROKE:
            return scaleType !== 'band'; // band does not make sense with color
        case channel_1.Channel.SHAPE:
            return scaleType === 'ordinal'; // shape = lookup only
    }
    /* istanbul ignore next: it should never reach here */
    return false;
}
exports.channelSupportScaleType = channelSupportScaleType;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NhbGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NhbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSx1Q0FBZ0M7QUFDaEMscUNBQWtEO0FBRWxELDJCQUE2QjtBQUM3QiwrQkFBc0Q7QUFHdEQsSUFBaUIsU0FBUyxDQXNCekI7QUF0QkQsV0FBaUIsU0FBUztJQUN4Qiw0QkFBNEI7SUFDZixnQkFBTSxHQUFhLFFBQVEsQ0FBQztJQUM1QixvQkFBVSxHQUFpQixZQUFZLENBQUM7SUFDeEMsYUFBRyxHQUFVLEtBQUssQ0FBQztJQUNuQixhQUFHLEdBQVUsS0FBSyxDQUFDO0lBQ25CLGNBQUksR0FBVyxNQUFNLENBQUM7SUFDbkMsb0JBQW9CO0lBQ1AsY0FBSSxHQUFXLE1BQU0sQ0FBQztJQUN0QixhQUFHLEdBQVUsS0FBSyxDQUFDO0lBQ2hDLGFBQWE7SUFDQSxvQkFBVSxHQUFpQixZQUFZLENBQUM7SUFFckQsZ0NBQWdDO0lBQ25CLGtCQUFRLEdBQWUsVUFBVSxDQUFDO0lBQ2xDLGtCQUFRLEdBQWUsVUFBVSxDQUFDO0lBQ2xDLG1CQUFTLEdBQWdCLFdBQVcsQ0FBQztJQUVyQyxpQkFBTyxHQUFjLFNBQVMsQ0FBQztJQUMvQixxQkFBVyxHQUFrQixhQUFhLENBQUM7SUFDM0MsZUFBSyxHQUFZLE9BQU8sQ0FBQztJQUN6QixjQUFJLEdBQVcsTUFBTSxDQUFDO0FBQ3JDLENBQUMsRUF0QmdCLFNBQVMsR0FBVCxpQkFBUyxLQUFULGlCQUFTLFFBc0J6QjtBQVVEOzs7R0FHRztBQUNILElBQU0sb0JBQW9CLEdBR3RCO0lBQ0YsTUFBTSxFQUFFLFNBQVM7SUFDakIsR0FBRyxFQUFFLFNBQVM7SUFDZCxHQUFHLEVBQUUsU0FBUztJQUNkLElBQUksRUFBRSxTQUFTO0lBQ2YsWUFBWSxFQUFFLFlBQVk7SUFDMUIsSUFBSSxFQUFFLE1BQU07SUFDWixHQUFHLEVBQUUsTUFBTTtJQUNYLFVBQVUsRUFBRSxZ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c0JBQXNCO0lBQzFELENBQUM7SUFDRCxzREFBc0Q7SUFDdEQsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUNmLENBQUM7QUFwQkQsMERBb0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt0b1NldH0gZnJvbSAndmVnYS11dGlsJztcbmltcG9ydCB7Q2hhbm5lbCwgaXNDb2xvckNoYW5uZWx9IGZyb20gJy4vY2hhbm5lbCc7XG5pbXBvcnQge0RhdGVUaW1lfSBmcm9tICcuL2RhdGV0aW1lJztcbmltcG9ydCAqIGFzIGxvZyBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2NvbnRhaW5zLCBGbGFnLCBmbGFnS2V5cywga2V5c30gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7U2NhbGVJbnRlcnBvbGF0ZSwgU2NhbGVJbnRlcnBvbGF0ZVBhcmFtc30gZnJvbSAnLi92ZWdhLnNjaGVtYSc7XG5cbmV4cG9ydCBuYW1lc3BhY2UgU2NhbGVUeXBlIHtcbiAgLy8gQ29udGludW91cyAtIFF1YW50aXRhdGl2ZVxuICBleHBvcnQgY29uc3QgTElORUFSOiAnbGluZWFyJyA9ICdsaW5lYXInO1xuICBleHBvcnQgY29uc3QgQklOX0xJTkVBUjogJ2Jpbi1saW5lYXInID0gJ2Jpbi1saW5lYXInO1xuICBleHBvcnQgY29uc3QgTE9HOiAnbG9nJyA9ICdsb2cnO1xuICBleHBvcnQgY29uc3QgUE9XOiAncG93JyA9ICdwb3cnO1xuICBleHBvcnQgY29uc3QgU1FSVDogJ3NxcnQnID0gJ3NxcnQnO1xuICAvLyBDb250aW51b3VzIC0gVGltZVxuICBleHBvcnQgY29uc3QgVElNRTogJ3RpbWUnID0gJ3RpbWUnO1xuICBleHBvcnQgY29uc3QgVVRDOiAndXRjJyA9ICd1dGMnO1xuICAvLyBzZXF1ZW50aWFsXG4gIGV4cG9ydCBjb25zdCBTRVFVRU5USUFMOiAnc2VxdWVudGlhbCcgPSAnc2VxdWVudGlhbCc7XG5cbiAgLy8gUXVhbnRpbGUsIFF1YW50aXplLCB0aHJlc2hvbGRcbiAgZXhwb3J0IGNvbnN0IFFVQU5USUxFOiAncXVhbnRpbGUnID0gJ3F1YW50aWxlJztcbiAgZXhwb3J0IGNvbnN0IFFVQU5USVpFOiAncXVhbnRpemUnID0gJ3F1YW50aXplJztcbiAgZXhwb3J0IGNvbnN0IFRIUkVTSE9MRDogJ3RocmVzaG9sZCcgPSAndGhyZXNob2xkJztcblxuICBleHBvcnQgY29uc3QgT1JESU5BTDogJ29yZGluYWwnID0gJ29yZGluYWwnO1xuICBleHBvcnQgY29uc3QgQklOX09SRElOQUw6ICdiaW4tb3JkaW5hbCcgPSAnYmluLW9yZGluYWwnO1xuICBleHBvcnQgY29uc3QgUE9JTlQ6ICdwb2ludCcgPSAncG9pbnQnO1xuICBleHBvcnQgY29uc3QgQkFORDogJ2JhbmQnID0gJ2JhbmQnO1xufVxuXG5leHBvcnQgdHlwZSBTY2FsZVR5cGUgPSB0eXBlb2YgU2NhbGVUeXBlLkxJTkVBUiB8IHR5cGVvZiBTY2FsZVR5cGUuQklOX0xJTkVBUiB8XG4gIHR5cGVvZiBTY2FsZVR5cGUuTE9HIHwgdHlwZW9mIFNjYWxlVHlwZS5QT1cgfCB0eXBlb2YgU2NhbGVUeXBlLlNRUlQgfFxuICB0eXBlb2YgU2NhbGVUeXBlLlRJTUUgfCB0eXBlb2YgU2NhbGVUeXBlLlVUQyB8XG4gIC8vIFRPRE86IGFkZCAncXVhbnRpemUnLCAncXVhbnRpbGUnLCAndGhyZXNob2xkJyBiYWNrIHdoZW4gd2UgcmVhbGx5IHN1cHBvcnQgdGhlbVxuICB0eXBlb2YgU2NhbGVUeXBlLlNFUVVFTlRJQUwgfCAvLyB0eXBlb2YgU2NhbGVUeXBlLlFVQU5USUxFIHwgdHlwZW9mIFNjYWxlVHlwZS5RVUFOVElaRSB8IHR5cGVvZiBTY2FsZVR5cGUuVEhSRVNIT0xEIHxcbiAgdHlwZW9mIFNjYWxlVHlwZS5PUkRJTkFMIHwgdHlwZW9mIFNjYWxlVHlwZS5CSU5fT1JESU5BTCB8IHR5cGVvZiBTY2FsZVR5cGUuUE9JTlQgfCB0eXBlb2YgU2NhbGVUeXBlLkJBTkQ7XG5cblxuLyoqXG4gKiBJbmRleCBmb3Igc2NhbGUgY2F0ZWdvcmllcyAtLSBvbmx5IHNjYWxlIG9mIHRoZSBzYW1lIGNhdGVnb3JpZXMgY2FuIGJlIG1lcmdlZCB0b2dldGhlci5cbiAqIEN1cnJlbnQgaW1wbGVtZW50YXRpb24gaXMgdHJ5aW5nIHRvIGJlIGNvbnNlcnZhdGl2ZSBhbmQgYXZvaWQgbWVyZ2luZyBzY2FsZSB0eXBlIHRoYXQgbWlnaHQgbm90IHdvcmsgdG9nZXRoZXJcbiAqL1xuY29uc3QgU0NBTEVfQ0FURUdPUllfSU5ERVg6IHtcbiAgLy8gVXNpbmcgTWFwcGVkIFR5cGUgdG8gZGVjbGFyZSB0eXBlIChodHRwczovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvZG9jcy9oYW5kYm9vay9hZHZhbmNlZC10eXBlcy5odG1sI21hcHBlZC10eXBlcylcbiAgW2sgaW4gU2NhbGVUeXBlXTogU2NhbGVUeXBlIHwgJ251bWVyaWMnIHwgJ29yZGluYWwtcG9zaXRpb24nXG59ID0ge1xuICBsaW5lYXI6ICdudW1lcmljJyxcbiAgbG9nOiAnbnVtZXJpYycsXG4gIHBvdzogJ251bWVyaWMnLFxuICBzcXJ0OiAnbnVtZXJpYycsXG4gICdiaW4tbGluZWFyJzogJ2Jpbi1saW5lYXInLCAvLyBUT0RPOiBzaG91bGQgYmluLWxpbmVhciBzdXBwb3J0IG1lcmdpbmcgd2l0aCBvdGhlclxuICB0aW1lOiAndGltZScsXG4gIHV0YzogJ3RpbWUnLFxuICBzZXF1ZW50aWFsOiAnc2VxdWVudGlhbCcsXG4gIG9yZGluYWw6ICdvcmRpbmFsJyxcbiAgJ2Jpbi1vcmRpbmFsJzogJ2Jpbi1vcmRpbmFsJywgLy8gVE9ETzogc2hvdWxkIGJpbi1vcmRpbmFsIHN1cHBvcnQgbWVyZ2luZyB3aXRoIG90aGVyXG4gIHBvaW50OiAnb3JkaW5hbC1wb3NpdGlvbicsXG4gIGJhbmQ6ICdvcmRpbmFsLXBvc2l0aW9uJ1xufTtcblxuZXhwb3J0IGNvbnN0IFNDQUxFX1RZUEVTID0ga2V5cyhTQ0FMRV9DQVRFR09SWV9JTkRFWCkgYXMgU2NhbGVUeXBlW107XG5cbi8qKlxuICogV2hldGhlciB0aGUgdHdvIGdpdmVuIHNjYWxlIHR5cGVzIGNhbiBiZSBtZXJnZWQgdG9nZXRoZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUNvbXBhdGlibGUoc2NhbGVUeXBlMTogU2NhbGVUeXBlLCBzY2FsZVR5cGUyOiBTY2FsZVR5cGUpIHtcbiAgY29uc3Qgc2NhbGVDYXRlZ29yeTEgPSBTQ0FMRV9DQVRFR09SWV9JTkRFWFtzY2FsZVR5cGUxXTtcbiAgY29uc3Qgc2NhbGVDYXRlZ29yeTIgPSBTQ0FMRV9DQVRFR09SWV9JTkRFWFtzY2FsZVR5cGUyXTtcbiAgcmV0dXJuIHNjYWxlQ2F0ZWdvcnkxID09PSBzY2FsZUNhdGVnb3J5MiB8fFxuICAgIChzY2FsZUNhdGVnb3J5MSA9PT0gJ29yZGluYWwtcG9zaXRpb24nICYmIHNjYWxlQ2F0ZWdvcnkyID09PSAndGltZScpIHx8XG4gICAgKHNjYWxlQ2F0ZWdvcnkyID09PSAnb3JkaW5hbC1wb3NpdGlvbicgJiYgc2NhbGVDYXRlZ29yeTEgPT09ICd0aW1lJyk7XG59XG5cbi8qKlxuICogSW5kZXggZm9yIHNjYWxlIHByZWNlZGVuY2UgLS0gaGlnaCBzY29yZSA9IGhpZ2hlciBwcmlvcml0eSBmb3IgbWVyZ2luZy5cbiAqL1xuY29uc3QgU0NBTEVfUFJFQ0VERU5DRV9JTkRFWDoge1xuICAvLyBVc2luZyBNYXBwZWQgVHlwZSB0byBkZWNsYXJlIHR5cGUgKGh0dHBzOi8vd3d3LnR5cGVzY3JpcHRsYW5nLm9yZy9kb2NzL2hhbmRib29rL2FkdmFuY2VkLXR5cGVzLmh0bWwjbWFwcGVkLXR5cGVzKVxuICBbayBpbiBTY2FsZVR5cGVdOiBudW1iZXJcbn0gPSB7XG4gIC8vIG51bWVyaWNcbiAgbGluZWFyOiAwLFxuICBsb2c6IDEsXG4gIHBvdzogMSxcbiAgc3FydDogMSxcbiAgLy8gdGltZVxuICB0aW1lOiAwLFxuICB1dGM6IDAsXG4gIC8vIG9yZGluYWwtcG9zaXRpb24gLS0gdGhlc2UgaGF2ZSBoaWdoZXIgcHJlY2VkZW5jZSB0aGFuIGNvbnRpbnVvdXMgc2NhbGVzIGFzIHRoZXkgc3VwcG9ydCBtb3JlIHR5cGVzIG9mIGRhdGFcbiAgcG9pbnQ6IDEwLFxuICBiYW5kOiAxMSwgLy8gYmFuZCBoYXMgaGlnaGVyIHByZWNlZGVuY2UgYXMgaXQgaXMgYmV0dGVyIGZvciBpbnRlcmFjdGlvblxuICAvLyBub24gZ3JvdXBlZCB0eXBlc1xuICAnYmluLWxpbmVhcic6IDAsXG4gIHNlcXVlbnRpYWw6IDAsXG4gIG9yZGluYWw6IDAsXG4gICdiaW4tb3JkaW5hbCc6IDAsXG59O1xuXG4vKipcbiAqIFJldHVybiBzY2FsZSBjYXRlZ29yaWVzIC0tIG9ubHkgc2NhbGUgb2YgdGhlIHNhbWUgY2F0ZWdvcmllcyBjYW4gYmUgbWVyZ2VkIHRvZ2V0aGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVUeXBlUHJlY2VkZW5jZShzY2FsZVR5cGU6IFNjYWxlVHlwZSk6IG51bWJlciB7XG4gIHJldHVybiBTQ0FMRV9QUkVDRURFTkNFX0lOREVYW3NjYWxlVHlwZV07XG59XG5cbmV4cG9ydCBjb25zdCBDT05USU5VT1VTX1RPX0NPTlRJTlVPVVNfU0NBTEVTOiBTY2FsZVR5cGVbXSA9IFsnbGluZWFyJywgJ2Jpbi1saW5lYXInLCAnbG9nJywgJ3BvdycsICdzcXJ0JywgJ3RpbWUnLCAndXRjJ107XG5jb25zdCBDT05USU5VT1VTX1RPX0NPTlRJTlVPVVNfSU5ERVggPSB0b1NldChDT05USU5VT1VTX1RPX0NPTlRJTlVPVVNfU0NBTEVTKTtcblxuZXhwb3J0IGNvbnN0IENPTlRJTlVPVVNfRE9NQUlOX1NDQUxFUzogU2NhbGVUeXBlW10gPSBDT05USU5VT1VTX1RPX0NPTlRJTlVPVVNfU0NBTEVTLmNvbmNhdChbJ3NlcXVlbnRpYWwnIC8qIFRPRE8gYWRkICdxdWFudGlsZScsICdxdWFudGl6ZScsICd0aHJlc2hvbGQnKi9dKTtcbmNvbnN0IENPTlRJTlVPVVNfRE9NQUlOX0lOREVYID0gdG9TZXQoQ09OVElOVU9VU19ET01BSU5fU0NBTEVTKTtcblxuZXhwb3J0IGNvbnN0IERJU0NSRVRFX0RPTUFJTl9TQ0FMRVM6IFNjYWxlVHlwZVtdID0gWydvcmRpbmFsJywgJ2Jpbi1vcmRpbmFsJywgJ3BvaW50JywgJ2JhbmQnXTtcbmNvbnN0IERJU0NSRVRFX0RPTUFJTl9JTkRFWCA9IHRvU2V0KERJU0NSRVRFX0RPTUFJTl9TQ0FMRVMpO1xuXG5jb25zdCBCSU5fU0NBTEVTX0lOREVYID0gdG9TZXQoWydiaW4tbGluZWFyJywgJ2Jpbi1vcmRpbmFsJ10pO1xuXG5leHBvcnQgY29uc3QgVElNRV9TQ0FMRV9UWVBFUzogU2NhbGVUeXBlW10gPSBbJ3RpbWUnLCAndXRjJ107XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNEaXNjcmV0ZURvbWFpbih0eXBlOiBTY2FsZVR5cGUpOiB0eXBlIGlzICdvcmRpbmFsJyB8ICdiaW4tb3JkaW5hbCcgfCAncG9pbnQnIHwgJ2JhbmQnIHtcbiAgcmV0dXJuIHR5cGUgaW4gRElTQ1JFVEVfRE9NQUlOX0lOREVYO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCaW5TY2FsZSh0eXBlOiBTY2FsZVR5cGUpOiB0eXBlIGlzICdiaW4tbGluZWFyJyB8ICdiaW4tb3JkaW5hbCcge1xuICByZXR1cm4gdHlwZSBpbiBCSU5fU0NBTEVTX0lOREVYO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzQ29udGludW91c0RvbWFpbih0eXBlOiBTY2FsZVR5cGUpOlxuICB0eXBlIGlzICdsaW5lYXInIHwgJ2xvZycgfCAncG93JyB8ICdzcXJ0JyB8ICd0aW1lJyB8ICd1dGMnfFxuICAgICAgICAgICdzZXF1ZW50aWFsJyAvKiBUT0RPIGFkZCB8ICdxdWFudGlsZScgfCAncXVhbnRpemUnIHwgJ3RocmVzaG9sZCcgKi8ge1xuICByZXR1cm4gdHlwZSBpbiBDT05USU5VT1VTX0RPTUFJTl9JTkRFWDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29udGludW91c1RvQ29udGludW91cyh0eXBlOiBTY2FsZVR5cGUpOiB0eXBlIGlzICdsaW5lYXInIHwgJ2Jpbi1saW5lYXInIHwgJ2xvZycgfCAncG93JyB8ICdzcXJ0JyB8ICd0aW1lJyB8ICd1dGMnIHtcbiAgcmV0dXJuIHR5cGUgaW4gQ09OVElOVU9VU19UT19DT05USU5VT1VTX0lOREVYO1xufVxuXG5leHBvcnQgdHlwZSBOaWNlVGltZSA9ICdzZWNvbmQnIHwgJ21pbnV0ZScgfCAnaG91cicgfCAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NhbGVDb25maWcge1xuICAvKipcbiAgICogSWYgdHJ1ZSwgcm91bmRzIG51bWVyaWMgb3V0cHV0IHZhbHVlcyB0byBpbnRlZ2Vycy5cbiAgICogVGhpcyBjYW4gYmUgaGVscGZ1bCBmb3Igc25hcHBpbmcgdG8gdGhlIHBpeGVsIGdyaWQuXG4gICAqIChPbmx5IGF2YWlsYWJsZSBmb3IgYHhgLCBgeWAsIGFuZCBgc2l6ZWAgc2NhbGVzLilcbiAgICovXG4gIHJvdW5kPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgdmFsdWVzIHRoYXQgZXhjZWVkIHRoZSBkYXRhIGRvbWFpbiBhcmUgY2xhbXBlZCB0byBlaXRoZXIgdGhlIG1pbmltdW0gb3IgbWF4aW11bSByYW5nZSB2YWx1ZVxuICAgKi9cbiAgY2xhbXA/OiBib29sZWFuO1xuICAvKipcbiAgICogIERlZmF1bHQgcmFuZ2Ugc3RlcCBmb3IgYHhgIGJhbmQgYW5kIHBvaW50IHNjYWxlcyBvZiB0ZXh0IG1hcmtzLlxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gYDkwYFxuICAgKlxuICAgKiAgQG1pbmltdW0gMFxuICAgKi9cbiAgdGV4dFhSYW5nZVN0ZXA/OiBudW1iZXI7IC8vIEZJWE1FOiBjb25zaWRlciBpZiB3ZSB3aWxsIHJlbmFtZSB0aGlzIFwidGFibGVDb2x1bW5XaWR0aFwiXG5cbiAgLyoqXG4gICAqIERlZmF1bHQgcmFuZ2Ugc3RlcCBmb3IgYmFuZCBhbmQgcG9pbnQgc2NhbGVzIG9mICgxKSB0aGUgYHlgIGNoYW5uZWxcbiAgICogYW5kICgyKSB0aGUgYHhgIGNoYW5uZWwgd2hlbiB0aGUgbWFyayBpcyBub3QgYHRleHRgLlxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gYDIxYFxuICAgKlxuICAgKiBAbWluaW11bSAwXG4gICAqL1xuICByYW5nZVN0ZXA/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IGlubmVyIHBhZGRpbmcgZm9yIGB4YCBhbmQgYHlgIGJhbmQtb3JkaW5hbCBzY2FsZXMuXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyBgMC4xYFxuICAgKlxuICAgKiBAbWluaW11bSAwXG4gICAqIEBtYXhpbXVtIDFcbiAgICovXG4gIGJhbmRQYWRkaW5nSW5uZXI/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgb3V0ZXIgcGFkZGluZyBmb3IgYHhgIGFuZCBgeWAgYmFuZC1vcmRpbmFsIHNjYWxlcy5cbiAgICogSWYgbm90IHNwZWNpZmllZCwgYnkgZGVmYXVsdCwgYmFuZCBzY2FsZSdzIHBhZGRpbmdPdXRlciBpcyBwYWRkaW5nSW5uZXIvMi5cbiAgICogQG1pbmltdW0gMFxuICAgKiBAbWF4aW11bSAxXG4gICAqL1xuICBiYW5kUGFkZGluZ091dGVyPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHBhZGRpbmcgZm9yIGNvbnRpbnVvdXMgc2NhbGVzLlxuICAgKlxuICAgKiBfX0RlZmF1bHQ6X18gYDVgIGZvciBjb250aW51b3VzIHgtc2NhbGUgb2YgYSB2ZXJ0aWNhbCBiYXIgYW5kIGNvbnRpbnVvdXMgeS1zY2FsZSBvZiBhIGhvcml6b250YWwgYmFyLjsgYDBgIG90aGVyd2lzZS5cbiAgICpcbiAgICogQG1pbmltdW0gMFxuICAgKi9cbiAgY29udGludW91c1BhZGRpbmc/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgb3V0ZXIgcGFkZGluZyBmb3IgYHhgIGFuZCBgeWAgcG9pbnQtb3JkaW5hbCBzY2FsZXMuXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyBgMC41YFxuICAgKlxuICAgKiBAbWluaW11bSAwXG4gICAqIEBtYXhpbXVtIDFcbiAgICovXG4gIHBvaW50UGFkZGluZz86IG51bWJlcjtcblxuICAvKipcbiAgICogVXNlIHRoZSBzb3VyY2UgZGF0YSByYW5nZSBiZWZvcmUgYWdncmVnYXRpb24gYXMgc2NhbGUgZG9tYWluIGluc3RlYWQgb2YgYWdncmVnYXRlZCBkYXRhIGZvciBhZ2dyZWdhdGUgYXhpcy5cbiAgICpcbiAgICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIHNldHRpbmcgYGRvbWFpbmAgdG8gYFwidW5hZ2dyZWdhdGVcImAgZm9yIGFnZ3JlZ2F0ZWQgX3F1YW50aXRhdGl2ZV8gZmllbGRzIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqIFRoaXMgcHJvcGVydHkgb25seSB3b3JrcyB3aXRoIGFnZ3JlZ2F0ZSBmdW5jdGlvbnMgdGhhdCBwcm9kdWNlIHZhbHVlcyB3aXRoaW4gdGhlIHJhdyBkYXRhIGRvbWFpbiAoYFwibWVhblwiYCwgYFwiYXZlcmFnZVwiYCwgYFwibWVkaWFuXCJgLCBgXCJxMVwiYCwgYFwicTNcImAsIGBcIm1pblwiYCwgYFwibWF4XCJgKS4gRm9yIG90aGVyIGFnZ3JlZ2F0aW9ucyB0aGF0IHByb2R1Y2UgdmFsdWVzIG91dHNpZGUgb2YgdGhlIHJhdyBkYXRhIGRvbWFpbiAoZS5nLiBgXCJjb3VudFwiYCwgYFwic3VtXCJgKSwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gYGZhbHNlYFxuICAgKi9cbiAgdXNlVW5hZ2dyZWdhdGVkRG9tYWluPzogYm9vbGVhbjtcblxuICAvLyBuaWNlIHNob3VsZCBkZXBlbmRzIG9uIHR5cGUgKHF1YW50aXRhdGl2ZSBvciB0ZW1wb3JhbCksIHNvXG4gIC8vIGxldCdzIG5vdCBtYWtlIGEgY29uZmlnLlxuXG4gIC8vIENvbmZpZ3MgZm9yIFJhbmdlXG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IG1heCB2YWx1ZSBmb3IgbWFwcGluZyBxdWFudGl0YXRpdmUgZmllbGRzIHRvIGJhcidzIHNpemUvYmFuZFNpemUuXG4gICAqXG4gICAqIElmIHVuZGVmaW5lZCAoZGVmYXVsdCksIHdlIHdpbGwgdXNlIHRoZSBzY2FsZSdzIGByYW5nZVN0ZXBgIC0gMS5cbiAgICogQG1pbmltdW0gMFxuICAgKi9cbiAgbWF4QmFuZFNpemU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IG1pbiB2YWx1ZSBmb3IgbWFwcGluZyBxdWFudGl0YXRpdmUgZmllbGRzIHRvIGJhciBhbmQgdGljaydzIHNpemUvYmFuZFNpemUgc2NhbGUgd2l0aCB6ZXJvPWZhbHNlLlxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gYDJgXG4gICAqXG4gICAqIEBtaW5pbXVtIDBcbiAgICovXG4gIG1pbkJhbmRTaXplPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBtYXggdmFsdWUgZm9yIG1hcHBpbmcgcXVhbnRpdGF0aXZlIGZpZWxkcyB0byB0ZXh0J3Mgc2l6ZS9mb250U2l6ZS5cbiAgICpcbiAgICogX19EZWZhdWx0IHZhbHVlOl9fIGA0MGBcbiAgICpcbiAgICogQG1pbmltdW0gMFxuICAgKi9cbiAgbWF4Rm9udFNpemU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IG1pbiB2YWx1ZSBmb3IgbWFwcGluZyBxdWFudGl0YXRpdmUgZmllbGRzIHRvIHRpY2sncyBzaXplL2ZvbnRTaXplIHNjYWxlIHdpdGggemVybz1mYWxzZVxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gYDhgXG4gICAqXG4gICAqIEBtaW5pbXVtIDBcbiAgICovXG4gIG1pbkZvbnRTaXplPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IG1pbmltdW0gb3BhY2l0eSBmb3IgbWFwcGluZyBhIGZpZWxkIHRvIG9wYWNpdHkuXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyBgMC4zYFxuICAgKlxuICAgKiBAbWluaW11bSAwXG4gICAqIEBtYXhpbXVtIDFcbiAgICovXG4gIG1pbk9wYWNpdHk/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgbWF4IG9wYWNpdHkgZm9yIG1hcHBpbmcgYSBmaWVsZCB0byBvcGFjaXR5LlxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gYDAuOGBcbiAgICpcbiAgICogQG1pbmltdW0gMFxuICAgKiBAbWF4aW11bSAxXG4gICAqL1xuICBtYXhPcGFjaXR5PzogbnVtYmVyO1xuXG5cbiAgLyoqXG4gICAqIERlZmF1bHQgbWluaW11bSB2YWx1ZSBmb3IgcG9pbnQgc2l6ZSBzY2FsZSB3aXRoIHplcm89ZmFsc2UuXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyBgOWBcbiAgICpcbiAgICogQG1pbmltdW0gMFxuICAgKi9cbiAgbWluU2l6ZT86IG51bWJlcjtcblxuICAvKipcbiAgICogRGVmYXVsdCBtYXggdmFsdWUgZm9yIHBvaW50IHNpemUgc2NhbGUuXG4gICAqIEBtaW5pbXVtIDBcbiAgICovXG4gIG1heFNpemU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgbWluaW11bSBzdHJva2VXaWR0aCBmb3Igc3Ryb2tlV2lkdGggKG9yIHJ1bGUvbGluZSdzIHNpemUpIHNjYWxlIHdpdGggemVybz1mYWxzZS5cbiAgICpcbiAgICogX19EZWZhdWx0IHZhbHVlOl9fIGAxYFxuICAgKlxuICAgKiBAbWluaW11bSAwXG4gICAqL1xuICBtaW5TdHJva2VXaWR0aD86IG51bWJlcjtcblxuICAvKipcbiAgICogRGVmYXVsdCBtYXggc3Ryb2tlV2lkdGggZm9yIHN0cm9rZVdpZHRoICAob3IgcnVsZS9saW5lJ3Mgc2l6ZSkgc2NhbGUuXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyBgNGBcbiAgICpcbiAgICogQG1pbmltdW0gMFxuICAgKi9cbiAgbWF4U3Ryb2tlV2lkdGg/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0U2NhbGVDb25maWcgPSB7XG4gIHRleHRYUmFuZ2VTdGVwOiA5MCxcbiAgcmFuZ2VTdGVwOiAyMSxcbiAgcG9pbnRQYWRkaW5nOiAwLjUsXG4gIGJhbmRQYWRkaW5nSW5uZXI6IDAuMSxcbiAgZmFjZXRTcGFjaW5nOiAxNixcblxuICBtaW5CYW5kU2l6ZTogMixcblxuICBtaW5Gb250U2l6ZTogOCxcbiAgbWF4Rm9udFNpemU6IDQwLFxuXG4gIG1pbk9wYWNpdHk6IDAuMyxcbiAgbWF4T3BhY2l0eTogMC44LFxuXG4gIC8vIEZJWE1FOiByZXZpc2UgaWYgdGhlc2UgKmNhbiogYmVjb21lIHJhdGlvcyBvZiByYW5nZVN0ZXBcbiAgbWluU2l6ZTogOSwgLy8gUG9pbnQgc2l6ZSBpcyBhcmVhLiBGb3Igc3F1YXJlIHBvaW50LCA5ID0gMyBwaXhlbCBeIDIsIG5vdCB0b28gc21hbGwhXG5cbiAgbWluU3Ryb2tlV2lkdGg6IDEsXG4gIG1heFN0cm9rZVdpZHRoOiA0XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVtZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBBIGNvbG9yIHNjaGVtZSBuYW1lIGZvciBzZXF1ZW50aWFsL29yZGluYWwgc2NhbGVzIChlLmcuLCBgXCJjYXRlZ29yeTEwXCJgIG9yIGBcInZpcmlkaXNcImApLlxuICAgKlxuICAgKiBGb3IgdGhlIGZ1bGwgbGlzdCBvZiBzdXBwb3J0ZWQgc2NoZW1lLCBwbGVhc2UgcmVmZXIgdG8gdGhlIFtWZWdhIFNjaGVtZV0oaHR0cHM6Ly92ZWdhLmdpdGh1Yi5pby92ZWdhL2RvY3Mvc2NoZW1lcy8jcmVmZXJlbmNlKSByZWZlcmVuY2UuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEZvciBzZXF1ZW50aWFsIGFuZCBkaXZlcmdpbmcgc2NoZW1lcyBvbmx5LCBkZXRlcm1pbmVzIHRoZSBleHRlbnQgb2YgdGhlIGNvbG9yIHJhbmdlIHRvIHVzZS4gRm9yIGV4YW1wbGUgYFswLjIsIDFdYCB3aWxsIHJlc2NhbGUgdGhlIGNvbG9yIHNjaGVtZSBzdWNoIHRoYXQgY29sb3IgdmFsdWVzIGluIHRoZSByYW5nZSBfWzAsIDAuMilfIGFyZSBleGNsdWRlZCBmcm9tIHRoZSBzY2hlbWUuXG4gICAqL1xuICBleHRlbnQ/OiBudW1iZXJbXTtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBjb2xvcnMgdG8gdXNlIGluIHRoZSBzY2hlbWUuIFRoaXMgY2FuIGJlIHVzZWZ1bCBmb3Igc2NhbGUgdHlwZXMgc3VjaCBhcyBgXCJxdWFudGl6ZVwiYCwgd2hpY2ggdXNlIHRoZSBsZW5ndGggb2YgdGhlIHNjYWxlIHJhbmdlIHRvIGRldGVybWluZSB0aGUgbnVtYmVyIG9mIGRpc2NyZXRlIGJpbnMgZm9yIHRoZSBzY2FsZSBkb21haW4uXG4gICAqXG4gICAqIEBoaWRlXG4gICAqL1xuICBjb3VudD86IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgU2VsZWN0aW9uRG9tYWluID0ge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgYSBzZWxlY3Rpb24uXG4gICAqL1xuICBzZWxlY3Rpb246IHN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBmaWVsZCBuYW1lIHRvIGV4dHJhY3Qgc2VsZWN0ZWQgdmFsdWVzIGZvciwgd2hlbiBhIHNlbGVjdGlvbiBpcyBbcHJvamVjdGVkXShwcm9qZWN0Lmh0bWwpXG4gICAqIG92ZXIgbXVsdGlwbGUgZmllbGRzIG9yIGVuY29kaW5ncy5cbiAgICovXG4gIGZpZWxkPzogc3RyaW5nXG59IHwge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgYSBzZWxlY3Rpb24uXG4gICAqL1xuICBzZWxlY3Rpb246IHN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBlbmNvZGluZyBjaGFubmVsIHRvIGV4dHJhY3Qgc2VsZWN0ZWQgdmFsdWVzIGZvciwgd2hlbiBhIHNlbGVjdGlvbiBpcyBbcHJvamVjdGVkXShwcm9qZWN0Lmh0bWwpXG4gICAqIG92ZXIgbXVsdGlwbGUgZmllbGRzIG9yIGVuY29kaW5ncy5cbiAgICovXG4gIGVuY29kaW5nPzogc3RyaW5nXG59O1xuXG5leHBvcnQgdHlwZSBEb21haW4gPSBudW1iZXJbXSB8IHN0cmluZ1tdIHwgYm9vbGVhbltdIHwgRGF0ZVRpbWVbXSB8ICd1bmFnZ3JlZ2F0ZWQnIHwgU2VsZWN0aW9uRG9tYWluO1xuZXhwb3J0IHR5cGUgU2NoZW1lID0gc3RyaW5nIHwgU2NoZW1lUGFyYW1zO1xuXG5leHBvcnQgdHlwZSBSYW5nZSA9IG51bWJlcltdIHwgc3RyaW5nW10gfCBzdHJpbmc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0V4dGVuZGVkU2NoZW1lKHNjaGVtZTogc3RyaW5nIHwgU2NoZW1lUGFyYW1zKTogc2NoZW1lIGlzIFNjaGVtZVBhcmFtcyB7XG4gIHJldHVybiBzY2hlbWUgJiYgISFzY2hlbWVbJ25hbWUnXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU2VsZWN0aW9uRG9tYWluKGRvbWFpbjogRG9tYWluKTogZG9tYWluIGlzIFNlbGVjdGlvbkRvbWFpbiB7XG4gIHJldHVybiBkb21haW4gJiYgZG9tYWluWydzZWxlY3Rpb24nXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTY2FsZSB7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBzY2FsZS4gIFZlZ2EtTGl0ZSBzdXBwb3J0cyB0aGUgZm9sbG93aW5nIGNhdGVnb3JpZXMgb2Ygc2NhbGUgdHlwZXM6XG4gICAqXG4gICAqIDEpIFsqKkNvbnRpbnVvdXMgU2NhbGVzKipdKHNjYWxlLmh0bWwjY29udGludW91cykgLS0gbWFwcGluZyBjb250aW51b3VzIGRvbWFpbnMgdG8gY29udGludW91cyBvdXRwdXQgcmFuZ2VzIChbYFwibGluZWFyXCJgXShzY2FsZS5odG1sI2xpbmVhciksIFtgXCJwb3dcImBdKHNjYWxlLmh0bWwjcG93KSwgW2BcInNxcnRcImBdKHNjYWxlLmh0bWwjc3FydCksIFtgXCJsb2dcImBdKHNjYWxlLmh0bWwjbG9nKSwgW2BcInRpbWVcImBdKHNjYWxlLmh0bWwjdGltZSksIFtgXCJ1dGNcImBdKHNjYWxlLmh0bWwjdXRjKSwgW2BcInNlcXVlbnRpYWxcImBdKHNjYWxlLmh0bWwjc2VxdWVudGlhbCkpLlxuICAgKlxuICAgKiAyKSBbKipEaXNjcmV0ZSBTY2FsZXMqKl0oc2NhbGUuaHRtbCNkaXNjcmV0ZSkgLS0gbWFwcGluZyBkaXNjcmV0ZSBkb21haW5zIHRvIGRpc2NyZXRlIChbYFwib3JkaW5hbFwiYF0oc2NhbGUuaHRtbCNvcmRpbmFsKSkgb3IgY29udGludW91cyAoW2BcImJhbmRcImBdKHNjYWxlLmh0bWwjYmFuZCkgYW5kIFtgXCJwb2ludFwiYF0oc2NhbGUuaHRtbCNwb2ludCkpIG91dHB1dCByYW5nZXMuXG4gICAqXG4gICAqIDMpIFsqKkRpc2NyZXRpemluZyBTY2FsZXMqKl0oc2NhbGUuaHRtbCNkaXNjcmV0aXppbmcpIC0tIG1hcHBpbmcgY29udGludW91cyBkb21haW5zIHRvIGRpc2NyZXRlIG91dHB1dCByYW5nZXMgKFtgXCJiaW4tbGluZWFyXCJgXShzY2FsZS5odG1sI2Jpbi1saW5lYXIpIGFuZCBbYFwiYmluLW9yZGluYWxcImBdKHNjYWxlLmh0bWwjYmluLW9yZGluYWwpKS5cbiAgICpcbiAgICogX19EZWZhdWx0IHZhbHVlOl9fIHBsZWFzZSBzZWUgdGhlIFtzY2FsZSB0eXBlIHRhYmxlXShzY2FsZS5odG1sI3R5cGUpLlxuICAgKi9cbiAgdHlwZT86IFNjYWxlVHlwZTtcblxuICAvKipcbiAgICogQ3VzdG9taXplZCBkb21haW4gdmFsdWVzLlxuICAgKlxuICAgKiBGb3IgX3F1YW50aXRhdGl2ZV8gZmllbGRzLCBgZG9tYWluYCBjYW4gdGFrZSB0aGUgZm9ybSBvZiBhIHR3by1lbGVtZW50IGFycmF5IHdpdGggbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZXMuICBbUGllY2V3aXNlIHNjYWxlc10oc2NhbGUuaHRtbCNwaWVjZXdpc2UpIGNhbiBiZSBjcmVhdGVkIGJ5IHByb3ZpZGluZyBhIGBkb21haW5gIHdpdGggbW9yZSB0aGFuIHR3byBlbnRyaWVzLlxuICAgKiBJZiB0aGUgaW5wdXQgZmllbGQgaXMgYWdncmVnYXRlZCwgYGRvbWFpbmAgY2FuIGFsc28gYmUgYSBzdHJpbmcgdmFsdWUgYFwidW5hZ2dyZWdhdGVkXCJgLCBpbmRpY2F0aW5nIHRoYXQgdGhlIGRvbWFpbiBzaG91bGQgaW5jbHVkZSB0aGUgcmF3IGRhdGEgdmFsdWVzIHByaW9yIHRvIHRoZSBhZ2dyZWdhdGlvbi5cbiAgICpcbiAgICogRm9yIF90ZW1wb3JhbF8gZmllbGRzLCBgZG9tYWluYCBjYW4gYmUgYSB0d28tZWxlbWVudCBhcnJheSBtaW5pbXVtIGFuZCBtYXhpbXVtIHZhbHVlcywgaW4gdGhlIGZvcm0gb2YgZWl0aGVyIHRpbWVzdGFtcHMgb3IgdGhlIFtEYXRlVGltZSBkZWZpbml0aW9uIG9iamVjdHNdKHR5cGVzLmh0bWwjZGF0ZXRpbWUpLlxuICAgKlxuICAgKiBGb3IgX29yZGluYWxfIGFuZCBfbm9taW5hbF8gZmllbGRzLCBgZG9tYWluYCBjYW4gYmUgYW4gYXJyYXkgdGhhdCBsaXN0cyB2YWxpZCBpbnB1dCB2YWx1ZXMuXG4gICAqXG4gICAqIFRoZSBgc2VsZWN0aW9uYCBwcm9wZXJ0eSBjYW4gYmUgdXNlZCB0byBbaW50ZXJhY3RpdmVseSBkZXRlcm1pbmVdKHNlbGVjdGlvbi5odG1sI3NjYWxlLWRvbWFpbnMpIHRoZSBzY2FsZSBkb21haW4uXG4gICAqL1xuICBkb21haW4/OiBudW1iZXJbXSB8IHN0cmluZ1tdIHwgYm9vbGVhbltdIHwgRGF0ZVRpbWVbXSB8ICd1bmFnZ3JlZ2F0ZWQnIHwgU2VsZWN0aW9uRG9tYWluO1xuXG5cbiAgLy8gSGlkZSBiZWNhdXNlIHdlIG1pZ2h0IG5vdCByZWFsbHkgbmVlZCB0aGlzLlxuICAvKipcbiAgICogSWYgdHJ1ZSwgcmV2ZXJzZXMgdGhlIG9yZGVyIG9mIHRoZSBzY2FsZSByYW5nZS5cbiAgICogX19EZWZhdWx0IHZhbHVlOl9fIGBmYWxzZWAuXG4gICAqXG4gICAqIEBoaWRlXG4gICAqL1xuICByZXZlcnNlPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIHJhbmdlIG9mIHRoZSBzY2FsZS4gT25lIG9mOlxuICAgKlxuICAgKiAtIEEgc3RyaW5nIGluZGljYXRpbmcgYSBbcHJlLWRlZmluZWQgbmFtZWQgc2NhbGUgcmFuZ2VdKHNjYWxlLmh0bWwjcmFuZ2UtY29uZmlnKSAoZS5nLiwgZXhhbXBsZSwgYFwic3ltYm9sXCJgLCBvciBgXCJkaXZlcmdpbmdcImApLlxuICAgKlxuICAgKiAtIEZvciBbY29udGludW91cyBzY2FsZXNdKHNjYWxlLmh0bWwjY29udGludW91cyksIHR3by1lbGVtZW50IGFycmF5IGluZGljYXRpbmcgIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWVzLCBvciBhbiBhcnJheSB3aXRoIG1vcmUgdGhhbiB0d28gZW50cmllcyBmb3Igc3BlY2lmeWluZyBhIFtwaWVjZXdpc2Ugc2NhbGVdKHNjYWxlLmh0bWwjcGllY2V3aXNlKS5cbiAgICpcbiAgICogLSBGb3IgW2Rpc2NyZXRlXShzY2FsZS5odG1sI2Rpc2NyZXRlKSBhbmQgW2Rpc2NyZXRpemluZ10oc2NhbGUuaHRtbCNkaXNjcmV0aXppbmcpIHNjYWxlcywgYW4gYXJyYXkgb2YgZGVzaXJlZCBvdXRwdXQgdmFsdWVzLlxuICAgKlxuICAgKiBfX05vdGVzOl9fXG4gICAqXG4gICAqIDEpIEZvciBbc2VxdWVudGlhbF0oc2NhbGUuaHRtbCNzZXF1ZW50aWFsKSwgW29yZGluYWxdKHNjYWxlLmh0bWwjb3JkaW5hbCksIGFuZCBkaXNjcmV0aXppbmcgY29sb3Igc2NhbGVzLCB5b3UgY2FuIGFsc28gc3BlY2lmeSBhIGNvbG9yIFtgc2NoZW1lYF0oc2NhbGUuaHRtbCNzY2hlbWUpIGluc3RlYWQgb2YgYHJhbmdlYC5cbiAgICpcbiAgICogMikgQW55IGRpcmVjdGx5IHNwZWNpZmllZCBgcmFuZ2VgIGZvciBgeGAgYW5kIGB5YCBjaGFubmVscyB3aWxsIGJlIGlnbm9yZWQuIFJhbmdlIGNhbiBiZSBjdXN0b21pemVkIHZpYSB0aGUgdmlldydzIGNvcnJlc3BvbmRpbmcgW3NpemVdKHNpemUuaHRtbCkgKGB3aWR0aGAgYW5kIGBoZWlnaHRgKSBvciB2aWEgW3JhbmdlIHN0ZXBzIGFuZCBwYWRkaW5ncyBwcm9wZXJ0aWVzXSgjcmFuZ2Utc3RlcCkgZm9yIFtiYW5kXSgjYmFuZCkgYW5kIFtwb2ludF0oI3BvaW50KSBzY2FsZXMuXG4gICAqL1xuICByYW5nZT86IG51bWJlcltdIHwgc3RyaW5nW10gfCBzdHJpbmc7XG5cbiAgLy8gb3JkaW5hbFxuICAvKipcbiAgICogVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHN0YXJ0cyBvZiBhZGphY2VudCBiYW5kcyBvciBwb2ludHMgaW4gW2JhbmRdKHNjYWxlLmh0bWwjYmFuZCkgYW5kIFtwb2ludF0oc2NhbGUuaHRtbCNwb2ludCkgc2NhbGVzLlxuICAgKlxuICAgKiBJZiBgcmFuZ2VTdGVwYCBpcyBgbnVsbGAgb3IgaWYgdGhlIHZpZXcgY29udGFpbnMgdGhlIHNjYWxlJ3MgY29ycmVzcG9uZGluZyBbc2l6ZV0oc2l6ZS5odG1sKSAoYHdpZHRoYCBmb3IgYHhgIHNjYWxlcyBhbmQgYGhlaWdodGAgZm9yIGB5YCBzY2FsZXMpLCBgcmFuZ2VTdGVwYCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZGV0ZXJtaW5lZCB0byBmaXQgdGhlIHNpemUgb2YgdGhlIHZpZXcuXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyAgZGVyaXZlZCB0aGUgW3NjYWxlIGNvbmZpZ10oY29uZmlnLmh0bWwjc2NhbGUtY29uZmlnKSdzIGB0ZXh0WFJhbmdlU3RlcGAgKGA5MGAgYnkgZGVmYXVsdCkgZm9yIHgtc2NhbGVzIG9mIGB0ZXh0YCBtYXJrcyBhbmQgYHJhbmdlU3RlcGAgKGAyMWAgYnkgZGVmYXVsdCkgZm9yIHgtc2NhbGVzIG9mIG90aGVyIG1hcmtzIGFuZCB5LXNjYWxlcy5cbiAgICpcbiAgICogX19XYXJuaW5nX186IElmIGByYW5nZVN0ZXBgIGlzIGBudWxsYCBhbmQgdGhlIGNhcmRpbmFsaXR5IG9mIHRoZSBzY2FsZSdzIGRvbWFpbiBpcyBoaWdoZXIgdGhhbiBgd2lkdGhgIG9yIGBoZWlnaHRgLCB0aGUgcmFuZ2VTdGVwIG1pZ2h0IGJlY29tZSBsZXNzIHRoYW4gb25lIHBpeGVsIGFuZCB0aGUgbWFyayBtaWdodCBub3QgYXBwZWFyIGNvcnJlY3RseS5cbiAgICpcbiAgICogQG1pbmltdW0gMFxuICAgKi9cbiAgcmFuZ2VTdGVwPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQSBzdHJpbmcgaW5kaWNhdGluZyBhIGNvbG9yIFtzY2hlbWVdKHNjYWxlLmh0bWwjc2NoZW1lKSBuYW1lIChlLmcuLCBgXCJjYXRlZ29yeTEwXCJgIG9yIGBcInZpcmlkaXNcImApIG9yIGEgW3NjaGVtZSBwYXJhbWV0ZXIgb2JqZWN0XShzY2FsZS5odG1sI3NjaGVtZS1wYXJhbXMpLlxuICAgKlxuICAgKiBEaXNjcmV0ZSBjb2xvciBzY2hlbWVzIG1heSBiZSB1c2VkIHdpdGggW2Rpc2NyZXRlXShzY2FsZS5odG1sI2Rpc2NyZXRlKSBvciBbZGlzY3JldGl6aW5nXShzY2FsZS5odG1sI2Rpc2NyZXRpemluZykgc2NhbGVzLiBDb250aW51b3VzIGNvbG9yIHNjaGVtZXMgYXJlIGludGVuZGVkIGZvciB1c2Ugd2l0aCBbc2VxdWVudGlhbF0oc2NhbGVzLmh0bWwjc2VxdWVudGlhbCkgc2NhbGVzLlxuICAgKlxuICAgKiBGb3IgdGhlIGZ1bGwgbGlzdCBvZiBzdXBwb3J0ZWQgc2NoZW1lLCBwbGVhc2UgcmVmZXIgdG8gdGhlIFtWZWdhIFNjaGVtZV0oaHR0cHM6Ly92ZWdhLmdpdGh1Yi5pby92ZWdhL2RvY3Mvc2NoZW1lcy8jcmVmZXJlbmNlKSByZWZlcmVuY2UuXG4gICAqL1xuICBzY2hlbWU/OiBzdHJpbmcgfCBTY2hlbWVQYXJhbXM7XG5cbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgcm91bmRzIG51bWVyaWMgb3V0cHV0IHZhbHVlcyB0byBpbnRlZ2Vycy4gVGhpcyBjYW4gYmUgaGVscGZ1bCBmb3Igc25hcHBpbmcgdG8gdGhlIHBpeGVsIGdyaWQuXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyBgZmFsc2VgLlxuICAgKi9cbiAgcm91bmQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBGb3IgX1tjb250aW51b3VzXShzY2FsZS5odG1sI2NvbnRpbnVvdXMpXyBzY2FsZXMsIGV4cGFuZHMgdGhlIHNjYWxlIGRvbWFpbiB0byBhY2NvbW1vZGF0ZSB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBwaXhlbHMgb24gZWFjaCBvZiB0aGUgc2NhbGUgcmFuZ2UuIFRoZSBzY2FsZSByYW5nZSBtdXN0IHJlcHJlc2VudCBwaXhlbHMgZm9yIHRoaXMgcGFyYW1ldGVyIHRvIGZ1bmN0aW9uIGFzIGludGVuZGVkLiBQYWRkaW5nIGFkanVzdG1lbnQgaXMgcGVyZm9ybWVkwqBwcmlvcsKgdG8gYWxsIG90aGVyIGFkanVzdG1lbnRzLCBpbmNsdWRpbmcgdGhlIGVmZmVjdHMgb2YgdGhlwqB6ZXJvLMKgbmljZSzCoGRvbWFpbk1pbiwgYW5kwqBkb21haW5NYXjCoHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEZvciBfW2JhbmRdKHNjYWxlLmh0bWwjYmFuZClfIHNjYWxlcywgc2hvcnRjdXQgZm9yIHNldHRpbmcgYHBhZGRpbmdJbm5lcmAgYW5kIGBwYWRkaW5nT3V0ZXJgIHRvIHRoZSBzYW1lIHZhbHVlLlxuICAgKlxuICAgKiBGb3IgX1twb2ludF0oc2NhbGUuaHRtbCNwb2ludClfIHNjYWxlcywgYWxpYXMgZm9yIGBwYWRkaW5nT3V0ZXJgLlxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gRm9yIF9jb250aW51b3VzXyBzY2FsZXMsIGRlcml2ZWQgZnJvbSB0aGUgW3NjYWxlIGNvbmZpZ10oc2NhbGUuaHRtbCNjb25maWcpJ3MgYGNvbnRpbnVvdXNQYWRkaW5nYC5cbiAgICogRm9yIF9iYW5kIGFuZCBwb2ludF8gc2NhbGVzLCBzZWUgYHBhZGRpbmdJbm5lcmAgYW5kIGBwYWRkaW5nT3V0ZXJgLlxuICAgKlxuICAgKiBAbWluaW11bSAwXG4gICAqL1xuICBwYWRkaW5nPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5uZXIgcGFkZGluZyAoc3BhY2luZykgd2l0aGluIGVhY2ggYmFuZCBzdGVwIG9mIGJhbmQgc2NhbGVzLCBhcyBhIGZyYWN0aW9uIG9mIHRoZSBzdGVwIHNpemUuIFRoaXMgdmFsdWUgbXVzdCBsaWUgaW4gdGhlIHJhbmdlIFswLDFdLlxuICAgKlxuICAgKiBGb3IgcG9pbnQgc2NhbGUsIHRoaXMgcHJvcGVydHkgaXMgaW52YWxpZCBhcyBwb2ludCBzY2FsZXMgZG8gbm90IGhhdmUgaW50ZXJuYWwgYmFuZCB3aWR0aHMgKG9ubHkgc3RlcCBzaXplcyBiZXR3ZWVuIGJhbmRzKS5cbiAgICpcbiAgICogX19EZWZhdWx0IHZhbHVlOl9fIGRlcml2ZWQgZnJvbSB0aGUgW3NjYWxlIGNvbmZpZ10oc2NhbGUuaHRtbCNjb25maWcpJ3MgYGJhbmRQYWRkaW5nSW5uZXJgLlxuICAgKlxuICAgKiBAbWluaW11bSAwXG4gICAqIEBtYXhpbXVtIDFcbiAgICovXG4gIHBhZGRpbmdJbm5lcj86IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG91dGVyIHBhZGRpbmcgKHNwYWNpbmcpIGF0IHRoZSBlbmRzIG9mIHRoZSByYW5nZSBvZiBiYW5kIGFuZCBwb2ludCBzY2FsZXMsXG4gICAqIGFzIGEgZnJhY3Rpb24gb2YgdGhlIHN0ZXAgc2l6ZS4gVGhpcyB2YWx1ZSBtdXN0IGxpZSBpbiB0aGUgcmFuZ2UgWzAsMV0uXG4gICAqXG4gICAqIF9fRGVmYXVsdCB2YWx1ZTpfXyBkZXJpdmVkIGZyb20gdGhlIFtzY2FsZSBjb25maWddKHNjYWxlLmh0bWwjY29uZmlnKSdzIGBiYW5kUGFkZGluZ091dGVyYCBmb3IgYmFuZCBzY2FsZXMgYW5kIGBwb2ludFBhZGRpbmdgIGZvciBwb2ludCBzY2FsZXMuXG4gICAqXG4gICAqIEBtaW5pbXVtIDBcbiAgICogQG1heGltdW0gMVxuICAgKi9cbiAgcGFkZGluZ091dGVyPzogbnVtYmVyO1xuXG4gIC8vIHR5cGljYWxcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdmFsdWVzIHRoYXQgZXhjZWVkIHRoZSBkYXRhIGRvbWFpbiBhcmUgY2xhbXBlZCB0byBlaXRoZXIgdGhlIG1pbmltdW0gb3IgbWF4aW11bSByYW5nZSB2YWx1ZVxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gZGVyaXZlZCBmcm9tIHRoZSBbc2NhbGUgY29uZmlnXShjb25maWcuaHRtbCNzY2FsZS1jb25maWcpJ3MgYGNsYW1wYCAoYHRydWVgIGJ5IGRlZmF1bHQpLlxuICAgKi9cbiAgY2xhbXA/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBFeHRlbmRpbmcgdGhlIGRvbWFpbiBzbyB0aGF0IGl0IHN0YXJ0cyBhbmQgZW5kcyBvbiBuaWNlIHJvdW5kIHZhbHVlcy4gVGhpcyBtZXRob2QgdHlwaWNhbGx5IG1vZGlmaWVzIHRoZSBzY2FsZeKAmXMgZG9tYWluLCBhbmQgbWF5IG9ubHkgZXh0ZW5kIHRoZSBib3VuZHMgdG8gdGhlIG5lYXJlc3Qgcm91bmQgdmFsdWUuIE5pY2luZyBpcyB1c2VmdWwgaWYgdGhlIGRvbWFpbiBpcyBjb21wdXRlZCBmcm9tIGRhdGEgYW5kIG1heSBiZSBpcnJlZ3VsYXIuIEZvciBleGFtcGxlLCBmb3IgYSBkb21haW4gb2YgX1swLjIwMTQ3OeKApiwgMC45OTY2NznigKZdXywgYSBuaWNlIGRvbWFpbiBtaWdodCBiZSBfWzAuMiwgMS4wXV8uXG4gICAqXG4gICAqIEZvciBxdWFudGl0YXRpdmUgc2NhbGVzIHN1Y2ggYXMgbGluZWFyLCBgbmljZWAgY2FuIGJlIGVpdGhlciBhIGJvb2xlYW4gZmxhZyBvciBhIG51bWJlci4gSWYgYG5pY2VgIGlzIGEgbnVtYmVyLCBpdCB3aWxsIHJlcHJlc2VudCBhIGRlc2lyZWQgdGljayBjb3VudC4gVGhpcyBhbGxvd3MgZ3JlYXRlciBjb250cm9sIG92ZXIgdGhlIHN0ZXAgc2l6ZSB1c2VkIHRvIGV4dGVuZCB0aGUgYm91bmRzLCBndWFyYW50ZWVpbmcgdGhhdCB0aGUgcmV0dXJuZWQgdGlja3Mgd2lsbCBleGFjdGx5IGNvdmVyIHRoZSBkb21haW4uXG4gICAqXG4gICAqIEZvciB0ZW1wb3JhbCBmaWVsZHMgd2l0aCB0aW1lIGFuZCB1dGMgc2NhbGVzLCB0aGUgYG5pY2VgIHZhbHVlIGNhbiBiZSBhIHN0cmluZyBpbmRpY2F0aW5nIHRoZSBkZXNpcmVkIHRpbWUgaW50ZXJ2YWwuIExlZ2FsIHZhbHVlcyBhcmUgYFwibWlsbGlzZWNvbmRcImAsIGBcInNlY29uZFwiYCwgYFwibWludXRlXCJgLCBgXCJob3VyXCJgLCBgXCJkYXlcImAsIGBcIndlZWtcImAsIGBcIm1vbnRoXCJgLCBhbmQgYFwieWVhclwiYC4gQWx0ZXJuYXRpdmVseSwgYHRpbWVgIGFuZCBgdXRjYCBzY2FsZXMgY2FuIGFjY2VwdCBhbiBvYmplY3QtdmFsdWVkIGludGVydmFsIHNwZWNpZmllciBvZiB0aGUgZm9ybSBge1wiaW50ZXJ2YWxcIjogXCJtb250aFwiLCBcInN0ZXBcIjogM31gLCB3aGljaCBpbmNsdWRlcyBhIGRlc2lyZWQgbnVtYmVyIG9mIGludGVydmFsIHN0ZXBzLiBIZXJlLCB0aGUgZG9tYWluIHdvdWxkIHNuYXAgdG8gcXVhcnRlciAoSmFuLCBBcHIsIEp1bCwgT2N0KSBib3VuZGFyaWVzLlxuICAgKlxuICAgKiBfX0RlZmF1bHQgdmFsdWU6X18gYHRydWVgIGZvciB1bmJpbm5lZCBfcXVhbnRpdGF0aXZlXyBmaWVsZHM7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgKlxuICAgKi9cbiAgbmljZT86IGJvb2xlYW4gfCBudW1iZXIgfCBOaWNlVGltZSB8IHtpbnRlcnZhbDogc3RyaW5nLCBzdGVwOiBudW1iZXJ9O1xuXG4gIC8qKlxuICAgKiBUaGUgbG9nYXJpdGhtIGJhc2Ugb2YgdGhlIGBsb2dgIHNjYWxlIChkZWZhdWx0IGAxMGApLlxuICAgKi9cbiAgYmFzZT86IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIGV4cG9uZW50IG9mIHRoZSBgcG93YCBzY2FsZS5cbiAgICovXG4gIGV4cG9uZW50PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIGVuc3VyZXMgdGhhdCBhIHplcm8gYmFzZWxpbmUgdmFsdWUgaXMgaW5jbHVkZWQgaW4gdGhlIHNjYWxlIGRvbWFpbi5cbiAgICpcbiAgICogX19EZWZhdWx0IHZhbHVlOl9fIGB0cnVlYCBmb3IgeCBhbmQgeSBjaGFubmVscyBpZiB0aGUgcXVhbnRpdGF0aXZlIGZpZWxkIGlzIG5vdCBiaW5uZWQgYW5kIG5vIGN1c3RvbSBgZG9tYWluYCBpcyBwcm92aWRlZDsgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqXG4gICAqIF9fTm90ZTpfXyBMb2csIHRpbWUsIGFuZCB1dGMgc2NhbGVzIGRvIG5vdCBzdXBwb3J0IGB6ZXJvYC5cbiAgICovXG4gIHplcm8/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZXJwb2xhdGlvbiBtZXRob2QgZm9yIHJhbmdlIHZhbHVlcy4gQnkgZGVmYXVsdCwgYSBnZW5lcmFsIGludGVycG9sYXRvciBmb3IgbnVtYmVycywgZGF0ZXMsIHN0cmluZ3MgYW5kIGNvbG9ycyAoaW4gUkdCIHNwYWNlKSBpcyB1c2VkLiBGb3IgY29sb3IgcmFuZ2VzLCB0aGlzIHByb3BlcnR5IGFsbG93cyBpbnRlcnBvbGF0aW9uIGluIGFsdGVybmF0aXZlIGNvbG9yIHNwYWNlcy4gTGVnYWwgdmFsdWVzIGluY2x1ZGUgYHJnYmAsIGBoc2xgLCBgaHNsLWxvbmdgLCBgbGFiYCwgYGhjbGAsIGBoY2wtbG9uZ2AsIGBjdWJlaGVsaXhgIGFuZCBgY3ViZWhlbGl4LWxvbmdgICgnLWxvbmcnIHZhcmlhbnRzIHVzZSBsb25nZXIgcGF0aHMgaW4gcG9sYXIgY29vcmRpbmF0ZSBzcGFjZXMpLiBJZiBvYmplY3QtdmFsdWVkLCB0aGlzIHByb3BlcnR5IGFjY2VwdHMgYW4gb2JqZWN0IHdpdGggYSBzdHJpbmctdmFsdWVkIF90eXBlXyBwcm9wZXJ0eSBhbmQgYW4gb3B0aW9uYWwgbnVtZXJpYyBfZ2FtbWFfIHByb3BlcnR5IGFwcGxpY2FibGUgdG8gcmdiIGFuZCBjdWJlaGVsaXggaW50ZXJwb2xhdG9ycy4gRm9yIG1vcmUsIHNlZSB0aGUgW2QzLWludGVycG9sYXRlIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9kMy9kMy1pbnRlcnBvbGF0ZSkuXG4gICAqXG4gICAqIF9fTm90ZTpfXyBTZXF1ZW50aWFsIHNjYWxlcyBkbyBub3Qgc3VwcG9ydCBgaW50ZXJwb2xhdGVgIGFzIHRoZXkgaGF2ZSBhIGZpeGVkIGludGVycG9sYXRvci4gIFNpbmNlIFZlZ2EtTGl0ZSB1c2VzIHNlcXVlbnRpYWwgc2NhbGVzIGZvciBxdWFudGl0YXRpdmUgZmllbGRzIGJ5IGRlZmF1bHQsIHlvdSBoYXZlIHRvIHNldCB0aGUgc2NhbGUgYHR5cGVgIHRvIG90aGVyIHF1YW50aXRhdGl2ZSBzY2FsZSB0eXBlIHN1Y2ggYXMgYFwibGluZWFyXCJgIHRvIGN1c3RvbWl6ZSBgaW50ZXJwb2xhdGVgLlxuICAgKi9cbiAgaW50ZXJwb2xhdGU/OiBTY2FsZUludGVycG9sYXRlIHwgU2NhbGVJbnRlcnBvbGF0ZVBhcmFtcztcbn1cblxuY29uc3QgU0NBTEVfUFJPUEVSVFlfSU5ERVg6IEZsYWc8a2V5b2YgU2NhbGU+ID0ge1xuICB0eXBlOiAxLFxuICBkb21haW46IDEsXG4gIHJhbmdlOiAxLFxuICByYW5nZVN0ZXA6IDEsXG4gIHNjaGVtZTogMSxcbiAgLy8gT3RoZXIgcHJvcGVydGllc1xuICByZXZlcnNlOiAxLFxuICByb3VuZDogMSxcbiAgLy8gcXVhbnRpdGF0aXZlIC8gdGltZVxuICBjbGFtcDogMSxcbiAgbmljZTogMSxcbiAgLy8gcXVhbnRpdGF0aXZlXG4gIGJhc2U6IDEsXG4gIGV4cG9uZW50OiAxLFxuICBpbnRlcnBvbGF0ZTogMSxcbiAgemVybzogMSwgLy8gemVybyBkZXBlbmRzIG9uIGRvbWFpblxuICAvLyBiYW5kL3BvaW50XG4gIHBhZGRpbmc6IDEsXG4gIHBhZGRpbmdJbm5lcjogMSxcbiAgcGFkZGluZ091dGVyOiAxXG59O1xuXG5leHBvcnQgY29uc3QgU0NBTEVfUFJPUEVSVElFUyA9IGZsYWdLZXlzKFNDQUxFX1BST1BFUlRZX0lOREVYKTtcblxuY29uc3Qge3R5cGUsIGRvbWFpbiwgcmFuZ2UsIHJhbmdlU3RlcCwgc2NoZW1lLCAuLi5OT05fVFlQRV9ET01BSU5fUkFOR0VfVkVHQV9TQ0FMRV9QUk9QRVJUWV9JTkRFWH0gPSBTQ0FMRV9QUk9QRVJUWV9JTkRFWDtcblxuZXhwb3J0IGNvbnN0IE5PTl9UWVBFX0RPTUFJTl9SQU5HRV9WRUdBX1NDQUxFX1BST1BFUlRJRVMgPSBmbGFnS2V5cyhOT05fVFlQRV9ET01BSU5fUkFOR0VfVkVHQV9TQ0FMRV9QUk9QRVJUWV9JTkRFWCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZVR5cGVTdXBwb3J0UHJvcGVydHkoc2NhbGVUeXBlOiBTY2FsZVR5cGUsIHByb3BOYW1lOiBrZXlvZiBTY2FsZSkge1xuICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgY2FzZSAndHlwZSc6XG4gICAgY2FzZSAnZG9tYWluJzpcbiAgICBjYXNlICdyZXZlcnNlJzpcbiAgICBjYXNlICdyYW5nZSc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdzY2hlbWUnOlxuICAgICAgcmV0dXJuIGNvbnRhaW5zKFsnc2VxdWVudGlhbCcsICdvcmRpbmFsJywgJ2Jpbi1vcmRpbmFsJywgJ3F1YW50aWxlJywgJ3F1YW50aXplJ10sIHNjYWxlVHlwZSk7XG4gICAgY2FzZSAnaW50ZXJwb2xhdGUnOlxuICAgICAgLy8gRklYTUUoaHR0cHM6Ly9naXRodWIuY29tL3ZlZ2EvdmVnYS1saXRlL2lzc3Vlcy8yOTAyKSBob3cgYWJvdXQgb3JkaW5hbD9cbiAgICAgIHJldHVybiBjb250YWlucyhbJ2xpbmVhcicsICdiaW4tbGluZWFyJywgJ3BvdycsICdsb2cnLCAnc3FydCcsICd1dGMnLCAndGltZSddLCBzY2FsZVR5cGUpO1xuICAgIGNhc2UgJ3JvdW5kJzpcbiAgICAgIHJldHVybiBpc0NvbnRpbnVvdXNUb0NvbnRpbnVvdXMoc2NhbGVUeXBlKSB8fCBzY2FsZVR5cGUgPT09ICdiYW5kJyB8fCBzY2FsZVR5cGUgPT09ICdwb2ludCc7XG4gICAgY2FzZSAncGFkZGluZyc6XG4gICAgICByZXR1cm4gaXNDb250aW51b3VzVG9Db250aW51b3VzKHNjYWxlVHlwZSkgfHwgY29udGFpbnMoWydwb2ludCcsICdiYW5kJ10sIHNjYWxlVHlwZSk7XG4gICAgY2FzZSAncGFkZGluZ091dGVyJzpcbiAgICBjYXNlICdyYW5nZVN0ZXAnOlxuICAgICAgcmV0dXJuIGNvbnRhaW5zKFsncG9pbnQnLCAnYmFuZCddLCBzY2FsZVR5cGUpO1xuICAgIGNhc2UgJ3BhZGRpbmdJbm5lcic6XG4gICAgICByZXR1cm4gc2NhbGVUeXBlID09PSAnYmFuZCc7XG4gICAgY2FzZSAnY2xhbXAnOlxuICAgICAgcmV0dXJuIGlzQ29udGludW91c1RvQ29udGludW91cyhzY2FsZVR5cGUpIHx8IHNjYWxlVHlwZSA9PT0gJ3NlcXVlbnRpYWwnO1xuICAgIGNhc2UgJ25pY2UnOlxuICAgICAgcmV0dXJuIGlzQ29udGludW91c1RvQ29udGludW91cyhzY2FsZVR5cGUpIHx8IHNjYWxlVHlwZSA9PT0gJ3NlcXVlbnRpYWwnIHx8IHNjYWxlVHlwZSBhcyBhbnkgPT09ICdxdWFudGl6ZSc7XG4gICAgY2FzZSAnZXhwb25lbnQnOlxuICAgICAgcmV0dXJuIHNjYWxlVHlwZSA9PT0gJ3Bvdyc7XG4gICAgY2FzZSAnYmFzZSc6XG4gICAgICByZXR1cm4gc2NhbGVUeXBlID09PSAnbG9nJztcbiAgICBjYXNlICd6ZXJvJzpcbiAgICAgIHJldHVybiBoYXNDb250aW51b3VzRG9tYWluKHNjYWxlVHlwZSkgJiYgIWNvbnRhaW5zKFtcbiAgICAgICAgJ2xvZycsICAvLyBsb2cgc2NhbGUgY2Fubm90IGhhdmUgemVybyB2YWx1ZVxuICAgICAgICAndGltZScsICd1dGMnLCAvLyB6ZXJvIGlzIG5vdCBtZWFuaW5nZnVsIGZvciB0aW1lXG4gICAgICAgICdiaW4tbGluZWFyJywgLy8gYmlubmluZyBzaG91bGQgbm90IGF1dG9tYXRpY2FsbHkgYWRkIHplcm9cbiAgICAgICAgJ3RocmVzaG9sZCcsIC8vIHRocmVzaG9sZCByZXF1aXJlcyBjdXN0b20gZG9tYWluIHNvIHplcm8gZG9lcyBub3QgbWF0dGVyXG4gICAgICAgICdxdWFudGlsZScgLy8gcXVhbnRpbGUgZGVwZW5kcyBvbiBkaXN0cmlidXRpb24gc28gemVybyBkb2VzIG5vdCBtYXR0ZXJcbiAgICAgIF0sIHNjYWxlVHlwZSk7XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IHNob3VsZCBuZXZlciByZWFjaCBoZXJlKi9cbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNjYWxlIHByb3BlcnR5ICR7cHJvcE5hbWV9LmApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdW5kZWZpbmVkIGlmIHRoZSBpbnB1dCBjaGFubmVsIHN1cHBvcnRzIHRoZSBpbnB1dCBzY2FsZSBwcm9wZXJ0eSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGFubmVsU2NhbGVQcm9wZXJ0eUluY29tcGF0YWJpbGl0eShjaGFubmVsOiBDaGFubmVsLCBwcm9wTmFtZToga2V5b2YgU2NhbGUpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgY2FzZSAnaW50ZXJwb2xhdGUnOlxuICAgIGNhc2UgJ3NjaGVtZSc6XG4gICAgICBpZiAoIWlzQ29sb3JDaGFubmVsKGNoYW5uZWwpKSB7XG4gICAgICAgIHJldHVybiBsb2cubWVzc2FnZS5jYW5ub3RVc2VTY2FsZVByb3BlcnR5V2l0aE5vbkNvbG9yKGNoYW5uZWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjYXNlICd0eXBlJzpcbiAgICBjYXNlICdkb21haW4nOlxuICAgIGNhc2UgJ3JhbmdlJzpcbiAgICBjYXNlICdiYXNlJzpcbiAgICBjYXNlICdleHBvbmVudCc6XG4gICAgY2FzZSAnbmljZSc6XG4gICAgY2FzZSAncGFkZGluZyc6XG4gICAgY2FzZSAncGFkZGluZ0lubmVyJzpcbiAgICBjYXNlICdwYWRkaW5nT3V0ZXInOlxuICAgIGNhc2UgJ3JhbmdlU3RlcCc6XG4gICAgY2FzZSAncmV2ZXJzZSc6XG4gICAgY2FzZSAncm91bmQnOlxuICAgIGNhc2UgJ2NsYW1wJzpcbiAgICBjYXNlICd6ZXJvJzpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7IC8vIEdPT0QhXG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IGl0IHNob3VsZCBuZXZlciByZWFjaCBoZXJlICovXG4gIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzY2FsZSBwcm9wZXJ0eSBcIiR7cHJvcE5hbWV9XCIuYCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGFubmVsU3VwcG9ydFNjYWxlVHlwZShjaGFubmVsOiBDaGFubmVsLCBzY2FsZVR5cGU6IFNjYWxlVHlwZSk6IGJvb2xlYW4ge1xuICBzd2l0Y2ggKGNoYW5uZWwpIHtcbiAgICBjYXNlIENoYW5uZWwuWDpcbiAgICBjYXNlIENoYW5uZWwuWTpcbiAgICBjYXNlIENoYW5uZWwuU0laRTogLy8gVE9ETzogc2l6ZSBhbmQgb3BhY2l0eSBjYW4gc3VwcG9ydCBvcmRpbmFsIHdpdGggbW9yZSBtb2RpZmljYXRpb25cbiAgICBjYXNlIENoYW5uZWwuT1BBQ0lUWTpcbiAgICAgIC8vIEFsdGhvdWdoIGl0IGdlbmVyYWxseSBkb2Vzbid0IG1ha2Ugc2Vuc2UgdG8gdXNlIGJhbmQgd2l0aCBzaXplIGFuZCBvcGFjaXR5LFxuICAgICAgLy8gaXQgY2FuIGFsc28gd29yayBzaW5jZSB3ZSB1c2UgYmFuZDogMC41IHRvIGdldCBtaWRwb2ludC5cbiAgICAgIHJldHVybiBpc0NvbnRpbnVvdXNUb0NvbnRpbnVvdXMoc2NhbGVUeXBlKSB8fCBjb250YWlucyhbJ2JhbmQnLCAncG9pbnQnXSwgc2NhbGVUeXBlKTtcblxuICAgIGNhc2UgQ2hhbm5lbC5DT0xPUjpcbiAgICBjYXNlIENoYW5uZWwuRklMTDpcbiAgICBjYXNlIENoYW5uZWwuU1RST0tFOlxuICAgICAgcmV0dXJuIHNjYWxlVHlwZSAhPT0gJ2JhbmQnOyAgICAvLyBiYW5kIGRvZXMgbm90IG1ha2Ugc2Vuc2Ugd2l0aCBjb2xvclxuXG4gICAgY2FzZSBDaGFubmVsLlNIQVBFOlxuICAgICAgcmV0dXJuIHNjYWxlVHlwZSA9PT0gJ29yZGluYWwnOyAvLyBzaGFwZSA9IGxvb2t1cCBvbmx5XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IGl0IHNob3VsZCBuZXZlciByZWFjaCBoZXJlICovXG4gIHJldHVybiBmYWxzZTtcbn1cbiJdfQ==